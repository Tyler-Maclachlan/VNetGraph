!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(3))},function(t,e,n){"use strict";var o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var i=o(n(2)),s=o(n(4)),r=n(5),a=n(6),c=n(7),u=o(n(8)),h=function(){function t(t,e,n,o){var r=this;this.numLoops=0,this.mousePos={x:0,y:0},this.container=t;var c=e.length,h=n.length;this.graphEdges=new Map,this.graphNodes=new Map,this.graphAttractions=new Map;for(var d=0;d<c;d++){var l={x:Math.random()*t.clientWidth,y:Math.random()*t.clientHeight};this.graphNodes.set(e[d].id,new i.default(1,l))}for(d=0;d<h;d++)this.graphEdges.set(d,new s.default(this.graphNodes.get(n[d].source),this.graphNodes.get(n[d].target),150,20));for(d=0;d<c;d++)for(var f=d+1;f<c;f++)this.graphAttractions.set(d+"-"+f,new u.default(this.graphNodes.get(e[d].id),this.graphNodes.get(e[f].id)));console.log(this.graphAttractions.size),this.canvas=a.createCanvas(t),this.canvas.onmousemove=function(t){r.updateMousePos(t)},requestAnimationFrame(function(){r.mainLoop()})}return t.prototype.mainLoop=function(){var t=this;requestAnimationFrame(function(){t.mainLoop()}),console.time("update"),this.graphAttractions.clear(),this.getAttractions(),console.log("attractions",this.graphAttractions.size),r.physicsStep(this.graphNodes,this.graphEdges,this.graphAttractions),console.timeEnd("update"),console.time("render"),a.render(this.canvas.getContext("2d"),this.graphNodes,this.graphEdges),console.timeEnd("render"),this.numLoops++},t.prototype.updateMousePos=function(t){this.mousePos=c.getMousePosition(this.canvas,t)},t.prototype.getAttractions=function(){var t=this;this.graphNodes.forEach(function(e,n){var o=e.position,i=o.x,s=o.y;t.graphNodes.forEach(function(o,r){var a=o.position,c=a.x,h=a.y;c>i-100&&c<i+100&&h>s-100&&h<s+100&&(t.graphAttractions.has(n+"-"+r)||t.graphAttractions.has(r+"-"+n)||t.graphAttractions.set(n+"-"+r,new u.default(e,o)))})})},t}();window.VNetGraph||(window.VNetGraph=h),e.default=h},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),i=function(){function t(t,e){this.mass=t,this.position=e,this.acceleration={x:0,y:0},this.velocity={x:0,y:0}}return t.prototype.update=function(){this.velocity=o.addVectors(this.velocity,this.acceleration),o.isVecZero(this.velocity)||(this.position=o.addVectors(this.position,this.velocity)),this.velocity=o.multiplyVecByScalar(this.velocity,.7),this.acceleration=o.multiplyVecByScalar(this.acceleration,.3)},t}();e.default=i},function(t,e,n){"use strict";function o(t,e){return e?{x:t.x/e,y:t.y/e}:{x:t.x,y:t.y}}function i(t){return Math.sqrt(t.x*t.x+t.y*t.y)}Object.defineProperty(e,"__esModule",{value:!0}),e.addVectors=function(t,e){return{x:t.x+e.x,y:t.y+e.y}},e.subVectors=function(t,e){return{x:t.x-e.x,y:t.y-e.y}},e.multiplyVecByScalar=function(t,e){return{x:t.x*e,y:t.y*e}},e.divideVecByScalar=o,e.getVecLength=i,e.normalizeVec=function(t){return o(t,i(t))},e.getDistanceBetweenVectors=function(t,e){var n=t.x-e.x,o=t.y-e.y;return Math.sqrt(n*n+o*o)},e.dotVectors=function(t,e){return t.x*e.y+t.y*e.y},e.isVecZero=function(t){return i(t)<1e-4},e.getAngleBetweenVectors=function(t,e){return 180*Math.atan2(e.y-t.y,e.x-t.x)/Math.PI},e.radsToDegrees=function(t){return 180*t/Math.PI}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0),i=function(){function t(t,e,n,o){this.node1=t,this.node2=e,this.restDistance=n,this.stiffness=o}return t.prototype.update=function(){var t=o.getDistanceBetweenVectors(this.node1.position,this.node2.position);t=t||1;var e=o.normalizeVec(o.subVectors(this.node2.position,this.node1.position)),n=o.normalizeVec(o.subVectors(this.node1.position,this.node2.position)),i=o.subVectors(this.node1.velocity,this.node2.velocity),s=o.subVectors(this.node2.velocity,this.node1.velocity),r=this.stiffness*(t-this.restDistance)*(e.x/t)-.03*i.x,a=this.stiffness*(t-this.restDistance)*(e.y/t)-.03*i.y,c=this.stiffness*(t-this.restDistance)*(n.x/t)-.03*s.x,u=this.stiffness*(t-this.restDistance)*(n.y/t)-.03*s.y;this.node1.acceleration.x+=r/this.node1.mass,this.node1.acceleration.y+=a/this.node1.mass,this.node2.acceleration.x+=c/this.node2.mass,this.node2.acceleration.y+=u/this.node2.mass},t}();e.default=i},function(t,e,n){"use strict";function o(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}Object.defineProperty(e,"__esModule",{value:!0}),e.physicsStep=function(t,e,n){console.time("attr"),n.forEach(function(t){t.update()}),console.timeEnd("attr"),console.time("springs"),e.forEach(function(t){t.update()}),console.timeEnd("springs"),console.time("nodes"),t.forEach(function(t){t.update()}),console.timeEnd("nodes")},o(n(8)),o(n(2)),o(n(4))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCanvas=function(t){var e=document.createElement("canvas"),n=t.clientWidth,o=t.clientHeight;return e.width=n,e.height=o,t.appendChild(e),e},e.render=function(t,e,n){t.clearRect(0,0,t.canvas.width,t.canvas.height),n.forEach(function(e,n){!function(t,e){t.beginPath(),t.lineWidth=2,t.strokeStyle="blue",t.moveTo(e.node1.position.x,e.node1.position.y),t.lineTo(e.node2.position.x,e.node2.position.y),t.stroke()}(t,e)}),e.forEach(function(e){!function(t,e,n){void 0===n&&(n=20),t.beginPath(),t.arc(e.position.x,e.position.y,n,0,2*Math.PI,!1),t.fillStyle="#252525",t.fill(),t.lineWidth=5,t.strokeStyle="#252525",t.stroke()}(t,e,20)})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getMousePosition=function(t,e){return{x:e.pageX-t.offsetLeft,y:e.pageY-t.offsetTop}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(0);e.GRAVITY=6.67428*Math.pow(10,-11);var i=function(){function t(t,n,o){void 0===o&&(o=e.GRAVITY),this.node1=t,this.node2=n,this.gravity=o}return t.prototype.update=function(){var t=o.getDistanceBetweenVectors(this.node1.position,this.node2.position)||1,e=this.gravity*(this.node1.mass*this.node2.mass/(t*t)),n=o.getAngleBetweenVectors(this.node1.position,this.node2.position),i=o.normalizeVec({x:-e*Math.cos(n),y:-e*Math.sin(n)}),s=o.normalizeVec({x:e*Math.cos(n),y:e*Math.sin(n)});this.node1.acceleration.x+=i.x/this.node1.mass,this.node1.acceleration.y+=i.y/this.node1.mass,this.node2.acceleration.x+=s.x/this.node2.mass,this.node2.acceleration.y+=s.x/this.node2.mass},t}();e.default=i}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbGliL3V0aWxzL2luZGV4LnRzIiwid2VicGFjazovLy8uL2xpYi9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9saWIvbW9kdWxlcy9QaHlzaWNzL25vZGUyZC9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9saWIvdXRpbHMvdmVjdG9yLnRzIiwid2VicGFjazovLy8uL2xpYi9tb2R1bGVzL1BoeXNpY3Mvc3ByaW5ncy9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9saWIvbW9kdWxlcy9QaHlzaWNzL2luZGV4LnRzIiwid2VicGFjazovLy8uL2xpYi9tb2R1bGVzL1JlbmRlcmVyL2luZGV4LnRzIiwid2VicGFjazovLy8uL2xpYi9tb2R1bGVzL0ludGVyYWN0aW9ucy9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9saWIvbW9kdWxlcy9QaHlzaWNzL2F0dHJhY3Rpb24vaW5kZXgudHMiXSwibmFtZXMiOlsiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImV4cG9ydHMiLCJtb2R1bGUiLCJpIiwibCIsIm1vZHVsZXMiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJvYmplY3QiLCJwcm9wZXJ0eSIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwicCIsInMiLCJfX2V4cG9ydCIsIl9faW1wb3J0RGVmYXVsdCIsInRoaXMiLCJtb2QiLCJkZWZhdWx0Iiwibm9kZTJkXzEiLCJzcHJpbmdzXzEiLCJQaHlzaWNzXzEiLCJSZW5kZXJlcl8xIiwiSW50ZXJhY3Rpb25zXzEiLCJhdHRyYWN0aW9uXzEiLCJWTmV0R3JhcGgiLCJjb250YWluZXIiLCJub2RlcyIsImVkZ2VzIiwib3B0aW9ucyIsIl90aGlzIiwibnVtTG9vcHMiLCJtb3VzZVBvcyIsIngiLCJ5Iiwibm9kZUxlbiIsImxlbmd0aCIsImVkZ2VMZW4iLCJncmFwaEVkZ2VzIiwiTWFwIiwiZ3JhcGhOb2RlcyIsImdyYXBoQXR0cmFjdGlvbnMiLCJwb3MiLCJNYXRoIiwicmFuZG9tIiwiY2xpZW50V2lkdGgiLCJjbGllbnRIZWlnaHQiLCJzZXQiLCJpZCIsInNvdXJjZSIsInRhcmdldCIsImNvbnNvbGUiLCJsb2ciLCJzaXplIiwiY2FudmFzIiwiY3JlYXRlQ2FudmFzIiwib25tb3VzZW1vdmUiLCJlIiwidXBkYXRlTW91c2VQb3MiLCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWUiLCJtYWluTG9vcCIsInRpbWUiLCJjbGVhciIsImdldEF0dHJhY3Rpb25zIiwicGh5c2ljc1N0ZXAiLCJ0aW1lRW5kIiwicmVuZGVyIiwiZ2V0Q29udGV4dCIsImdldE1vdXNlUG9zaXRpb24iLCJmb3JFYWNoIiwibm9kZSIsIl9hIiwicG9zaXRpb24iLCJrIiwibngiLCJueSIsImhhcyIsIndpbmRvdyIsInV0aWxzXzEiLCJOb2RlMkQiLCJtYXNzIiwiYWNjZWxlcmF0aW9uIiwidmVsb2NpdHkiLCJ1cGRhdGUiLCJhZGRWZWN0b3JzIiwiaXNWZWNaZXJvIiwibXVsdGlwbHlWZWNCeVNjYWxhciIsImRpdmlkZVZlY0J5U2NhbGFyIiwidmVjIiwic2NhbGFyIiwiZ2V0VmVjTGVuZ3RoIiwic3FydCIsInZlYzEiLCJ2ZWMyIiwic3ViVmVjdG9ycyIsIm5vcm1hbGl6ZVZlYyIsImdldERpc3RhbmNlQmV0d2VlblZlY3RvcnMiLCJkeCIsImR5IiwiZG90VmVjdG9ycyIsImdldEFuZ2xlQmV0d2VlblZlY3RvcnMiLCJhdGFuMiIsIlBJIiwicmFkc1RvRGVncmVlcyIsInJhZHMiLCJTcHJpbmcyRCIsIm5vZGUxIiwibm9kZTIiLCJyZXN0RGlzdGFuY2UiLCJzdGlmZm5lc3MiLCJ4QWJzIiwibm9ybTEiLCJub3JtMiIsInYxIiwidjIiLCJGMXgiLCJGMXkiLCJGMngiLCJGMnkiLCJhdHRyYWN0aW9ucyIsImF0dHIiLCJlZGdlIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50Iiwid2lkdGgiLCJoZWlnaHQiLCJhcHBlbmRDaGlsZCIsImN0eCIsImNsZWFyUmVjdCIsImNvbnRleHQiLCJiZWdpblBhdGgiLCJsaW5lV2lkdGgiLCJzdHJva2VTdHlsZSIsIm1vdmVUbyIsImxpbmVUbyIsInN0cm9rZSIsImNyZWF0ZUxpbmUiLCJyYWRpdXMiLCJhcmMiLCJmaWxsU3R5bGUiLCJmaWxsIiwiY3JlYXRlQ2lyY2xlIiwicGFnZVgiLCJvZmZzZXRMZWZ0IiwicGFnZVkiLCJvZmZzZXRUb3AiLCJHUkFWSVRZIiwicG93IiwiQXR0cmFjdGlvbjJEIiwiZ3Jhdml0eSIsImFic1giLCJGIiwiYW5nbGUiLCJmMSIsImNvcyIsInNpbiIsImYyIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxFQUFBLEdBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFDLFFBR0EsSUFBQUMsRUFBQUosRUFBQUUsR0FBQSxDQUNBRyxFQUFBSCxFQUNBSSxHQUFBLEVBQ0FILFFBQUEsSUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixHQUdBRyxFQUFBRSxHQUFBLEVBR0FGLEVBQUFELFFBS0FGLEVBQUFRLEVBQUFGLEVBR0FOLEVBQUFTLEVBQUFWLEVBR0FDLEVBQUFVLEVBQUEsU0FBQVIsRUFBQVMsRUFBQUMsR0FDQVosRUFBQWEsRUFBQVgsRUFBQVMsSUFDQUcsT0FBQUMsZUFBQWIsRUFBQVMsRUFBQSxDQUEwQ0ssWUFBQSxFQUFBQyxJQUFBTCxLQUsxQ1osRUFBQWtCLEVBQUEsU0FBQWhCLEdBQ0Esb0JBQUFpQixlQUFBQyxhQUNBTixPQUFBQyxlQUFBYixFQUFBaUIsT0FBQUMsWUFBQSxDQUF3REMsTUFBQSxX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QWtJIiwiZmlsZSI6IlZOZXRXb3JrLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEpO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbmZ1bmN0aW9uIF9fZXhwb3J0KG0pIHtcclxuICAgIGZvciAodmFyIHAgaW4gbSkgaWYgKCFleHBvcnRzLmhhc093blByb3BlcnR5KHApKSBleHBvcnRzW3BdID0gbVtwXTtcclxufVxyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbl9fZXhwb3J0KHJlcXVpcmUoXCIuL3ZlY3RvclwiKSk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19pbXBvcnREZWZhdWx0ID0gKHRoaXMgJiYgdGhpcy5fX2ltcG9ydERlZmF1bHQpIHx8IGZ1bmN0aW9uIChtb2QpIHtcclxuICAgIHJldHVybiAobW9kICYmIG1vZC5fX2VzTW9kdWxlKSA/IG1vZCA6IHsgXCJkZWZhdWx0XCI6IG1vZCB9O1xyXG59O1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBub2RlMmRfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9tb2R1bGVzL1BoeXNpY3Mvbm9kZTJkXCIpKTtcclxudmFyIHNwcmluZ3NfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9tb2R1bGVzL1BoeXNpY3Mvc3ByaW5nc1wiKSk7XHJcbnZhciBQaHlzaWNzXzEgPSByZXF1aXJlKFwiLi9tb2R1bGVzL1BoeXNpY3NcIik7XHJcbnZhciBSZW5kZXJlcl8xID0gcmVxdWlyZShcIi4vbW9kdWxlcy9SZW5kZXJlclwiKTtcclxudmFyIEludGVyYWN0aW9uc18xID0gcmVxdWlyZShcIi4vbW9kdWxlcy9JbnRlcmFjdGlvbnNcIik7XHJcbnZhciBhdHRyYWN0aW9uXzEgPSBfX2ltcG9ydERlZmF1bHQocmVxdWlyZShcIi4vbW9kdWxlcy9QaHlzaWNzL2F0dHJhY3Rpb25cIikpO1xyXG52YXIgVk5ldEdyYXBoID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gVk5ldEdyYXBoKGNvbnRhaW5lciwgbm9kZXMsIGVkZ2VzLCBvcHRpb25zKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLm51bUxvb3BzID0gMDtcclxuICAgICAgICB0aGlzLm1vdXNlUG9zID0geyB4OiAwLCB5OiAwIH07XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBjb250YWluZXI7XHJcbiAgICAgICAgdmFyIG5vZGVMZW4gPSBub2Rlcy5sZW5ndGg7XHJcbiAgICAgICAgdmFyIGVkZ2VMZW4gPSBlZGdlcy5sZW5ndGg7XHJcbiAgICAgICAgdGhpcy5ncmFwaEVkZ2VzID0gbmV3IE1hcCgpO1xyXG4gICAgICAgIHRoaXMuZ3JhcGhOb2RlcyA9IG5ldyBNYXAoKTtcclxuICAgICAgICB0aGlzLmdyYXBoQXR0cmFjdGlvbnMgPSBuZXcgTWFwKCk7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2RlTGVuOyBpKyspIHtcclxuICAgICAgICAgICAgdmFyIHBvcyA9IHtcclxuICAgICAgICAgICAgICAgIHg6IE1hdGgucmFuZG9tKCkgKiBjb250YWluZXIuY2xpZW50V2lkdGgsXHJcbiAgICAgICAgICAgICAgICB5OiBNYXRoLnJhbmRvbSgpICogY29udGFpbmVyLmNsaWVudEhlaWdodFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLmdyYXBoTm9kZXMuc2V0KG5vZGVzW2ldLmlkLCBuZXcgbm9kZTJkXzEuZGVmYXVsdCgxLCBwb3MpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlZGdlTGVuOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5ncmFwaEVkZ2VzLnNldChpLCBuZXcgc3ByaW5nc18xLmRlZmF1bHQodGhpcy5ncmFwaE5vZGVzLmdldChlZGdlc1tpXS5zb3VyY2UpLCB0aGlzLmdyYXBoTm9kZXMuZ2V0KGVkZ2VzW2ldLnRhcmdldCksIDE1MCwgMjApKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2RlTGVuOyBpKyspIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgYyA9IGkgKyAxOyBjIDwgbm9kZUxlbjsgYysrKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdyYXBoQXR0cmFjdGlvbnMuc2V0KGkgKyBcIi1cIiArIGMsIG5ldyBhdHRyYWN0aW9uXzEuZGVmYXVsdCh0aGlzLmdyYXBoTm9kZXMuZ2V0KG5vZGVzW2ldLmlkKSwgdGhpcy5ncmFwaE5vZGVzLmdldChub2Rlc1tjXS5pZCkpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zb2xlLmxvZyh0aGlzLmdyYXBoQXR0cmFjdGlvbnMuc2l6ZSk7XHJcbiAgICAgICAgdGhpcy5jYW52YXMgPSBSZW5kZXJlcl8xLmNyZWF0ZUNhbnZhcyhjb250YWluZXIpO1xyXG4gICAgICAgIHRoaXMuY2FudmFzLm9ubW91c2Vtb3ZlID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgX3RoaXMudXBkYXRlTW91c2VQb3MoZSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5tYWluTG9vcCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgVk5ldEdyYXBoLnByb3RvdHlwZS5tYWluTG9vcCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIF90aGlzLm1haW5Mb29wKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29uc29sZS50aW1lKFwidXBkYXRlXCIpO1xyXG4gICAgICAgIHRoaXMuZ3JhcGhBdHRyYWN0aW9ucy5jbGVhcigpO1xyXG4gICAgICAgIHRoaXMuZ2V0QXR0cmFjdGlvbnMoKTtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImF0dHJhY3Rpb25zXCIsIHRoaXMuZ3JhcGhBdHRyYWN0aW9ucy5zaXplKTtcclxuICAgICAgICBQaHlzaWNzXzEucGh5c2ljc1N0ZXAodGhpcy5ncmFwaE5vZGVzLCB0aGlzLmdyYXBoRWRnZXMsIHRoaXMuZ3JhcGhBdHRyYWN0aW9ucyk7XHJcbiAgICAgICAgY29uc29sZS50aW1lRW5kKFwidXBkYXRlXCIpO1xyXG4gICAgICAgIGNvbnNvbGUudGltZShcInJlbmRlclwiKTtcclxuICAgICAgICBSZW5kZXJlcl8xLnJlbmRlcih0aGlzLmNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIiksIHRoaXMuZ3JhcGhOb2RlcywgdGhpcy5ncmFwaEVkZ2VzKTtcclxuICAgICAgICBjb25zb2xlLnRpbWVFbmQoXCJyZW5kZXJcIik7XHJcbiAgICAgICAgdGhpcy5udW1Mb29wcysrO1xyXG4gICAgfTtcclxuICAgIFZOZXRHcmFwaC5wcm90b3R5cGUudXBkYXRlTW91c2VQb3MgPSBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgIHRoaXMubW91c2VQb3MgPSBJbnRlcmFjdGlvbnNfMS5nZXRNb3VzZVBvc2l0aW9uKHRoaXMuY2FudmFzLCBlKTtcclxuICAgIH07XHJcbiAgICBWTmV0R3JhcGgucHJvdG90eXBlLmdldEF0dHJhY3Rpb25zID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy5ncmFwaE5vZGVzLmZvckVhY2goZnVuY3Rpb24gKG5vZGUsIGtleSkge1xyXG4gICAgICAgICAgICB2YXIgX2EgPSBub2RlLnBvc2l0aW9uLCB4ID0gX2EueCwgeSA9IF9hLnk7XHJcbiAgICAgICAgICAgIF90aGlzLmdyYXBoTm9kZXMuZm9yRWFjaChmdW5jdGlvbiAobiwgaykge1xyXG4gICAgICAgICAgICAgICAgdmFyIF9hID0gbi5wb3NpdGlvbiwgbnggPSBfYS54LCBueSA9IF9hLnk7XHJcbiAgICAgICAgICAgICAgICBpZiAobnggPiB4IC0gMTAwICYmIG54IDwgeCArIDEwMCAmJiBueSA+IHkgLSAxMDAgJiYgbnkgPCB5ICsgMTAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfdGhpcy5ncmFwaEF0dHJhY3Rpb25zLmhhcyhrZXkgKyBcIi1cIiArIGspICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICFfdGhpcy5ncmFwaEF0dHJhY3Rpb25zLmhhcyhrICsgXCItXCIgKyBrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmdyYXBoQXR0cmFjdGlvbnMuc2V0KGtleSArIFwiLVwiICsgaywgbmV3IGF0dHJhY3Rpb25fMS5kZWZhdWx0KG5vZGUsIG4pKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBWTmV0R3JhcGg7XHJcbn0oKSk7XHJcbmlmICghd2luZG93LlZOZXRHcmFwaCkge1xyXG4gICAgd2luZG93LlZOZXRHcmFwaCA9IFZOZXRHcmFwaDtcclxufVxyXG5leHBvcnRzLmRlZmF1bHQgPSBWTmV0R3JhcGg7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciB1dGlsc18xID0gcmVxdWlyZShcIi4uLy4uLy4uL3V0aWxzXCIpO1xyXG52YXIgTm9kZTJEID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xyXG4gICAgZnVuY3Rpb24gTm9kZTJEKG1hc3MsIHBvc2l0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5tYXNzID0gbWFzcztcclxuICAgICAgICB0aGlzLnBvc2l0aW9uID0gcG9zaXRpb247XHJcbiAgICAgICAgdGhpcy5hY2NlbGVyYXRpb24gPSB7IHg6IDAsIHk6IDAgfTtcclxuICAgICAgICB0aGlzLnZlbG9jaXR5ID0geyB4OiAwLCB5OiAwIH07XHJcbiAgICB9XHJcbiAgICBOb2RlMkQucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB0aGlzLnZlbG9jaXR5ID0gdXRpbHNfMS5hZGRWZWN0b3JzKHRoaXMudmVsb2NpdHksIHRoaXMuYWNjZWxlcmF0aW9uKTtcclxuICAgICAgICBpZiAoIXV0aWxzXzEuaXNWZWNaZXJvKHRoaXMudmVsb2NpdHkpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucG9zaXRpb24gPSB1dGlsc18xLmFkZFZlY3RvcnModGhpcy5wb3NpdGlvbiwgdGhpcy52ZWxvY2l0eSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudmVsb2NpdHkgPSB1dGlsc18xLm11bHRpcGx5VmVjQnlTY2FsYXIodGhpcy52ZWxvY2l0eSwgMC43KTtcclxuICAgICAgICB0aGlzLmFjY2VsZXJhdGlvbiA9IHV0aWxzXzEubXVsdGlwbHlWZWNCeVNjYWxhcih0aGlzLmFjY2VsZXJhdGlvbiwgMC4zKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gTm9kZTJEO1xyXG59KCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBOb2RlMkQ7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmZ1bmN0aW9uIGFkZFZlY3RvcnModmVjMSwgdmVjMikge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB4OiB2ZWMxLnggKyB2ZWMyLngsXHJcbiAgICAgICAgeTogdmVjMS55ICsgdmVjMi55XHJcbiAgICB9O1xyXG59XHJcbmV4cG9ydHMuYWRkVmVjdG9ycyA9IGFkZFZlY3RvcnM7XHJcbmZ1bmN0aW9uIHN1YlZlY3RvcnModmVjMSwgdmVjMikge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB4OiB2ZWMxLnggLSB2ZWMyLngsXHJcbiAgICAgICAgeTogdmVjMS55IC0gdmVjMi55XHJcbiAgICB9O1xyXG59XHJcbmV4cG9ydHMuc3ViVmVjdG9ycyA9IHN1YlZlY3RvcnM7XHJcbmZ1bmN0aW9uIG11bHRpcGx5VmVjQnlTY2FsYXIodmVjLCBzY2FsYXIpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgeDogdmVjLnggKiBzY2FsYXIsXHJcbiAgICAgICAgeTogdmVjLnkgKiBzY2FsYXJcclxuICAgIH07XHJcbn1cclxuZXhwb3J0cy5tdWx0aXBseVZlY0J5U2NhbGFyID0gbXVsdGlwbHlWZWNCeVNjYWxhcjtcclxuZnVuY3Rpb24gZGl2aWRlVmVjQnlTY2FsYXIodmVjLCBzY2FsYXIpIHtcclxuICAgIGlmIChzY2FsYXIpIHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICB4OiB2ZWMueCAvIHNjYWxhcixcclxuICAgICAgICAgICAgeTogdmVjLnkgLyBzY2FsYXJcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgeDogdmVjLngsXHJcbiAgICAgICAgICAgIHk6IHZlYy55XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxyXG5leHBvcnRzLmRpdmlkZVZlY0J5U2NhbGFyID0gZGl2aWRlVmVjQnlTY2FsYXI7XHJcbmZ1bmN0aW9uIGdldFZlY0xlbmd0aCh2ZWMpIHtcclxuICAgIHJldHVybiBNYXRoLnNxcnQodmVjLnggKiB2ZWMueCArIHZlYy55ICogdmVjLnkpO1xyXG59XHJcbmV4cG9ydHMuZ2V0VmVjTGVuZ3RoID0gZ2V0VmVjTGVuZ3RoO1xyXG5mdW5jdGlvbiBub3JtYWxpemVWZWModmVjKSB7XHJcbiAgICByZXR1cm4gZGl2aWRlVmVjQnlTY2FsYXIodmVjLCBnZXRWZWNMZW5ndGgodmVjKSk7XHJcbn1cclxuZXhwb3J0cy5ub3JtYWxpemVWZWMgPSBub3JtYWxpemVWZWM7XHJcbmZ1bmN0aW9uIGdldERpc3RhbmNlQmV0d2VlblZlY3RvcnModmVjMSwgdmVjMikge1xyXG4gICAgdmFyIGR4ID0gdmVjMS54IC0gdmVjMi54O1xyXG4gICAgdmFyIGR5ID0gdmVjMS55IC0gdmVjMi55O1xyXG4gICAgcmV0dXJuIE1hdGguc3FydChkeCAqIGR4ICsgZHkgKiBkeSk7XHJcbn1cclxuZXhwb3J0cy5nZXREaXN0YW5jZUJldHdlZW5WZWN0b3JzID0gZ2V0RGlzdGFuY2VCZXR3ZWVuVmVjdG9ycztcclxuZnVuY3Rpb24gZG90VmVjdG9ycyh2ZWMxLCB2ZWMyKSB7XHJcbiAgICByZXR1cm4gdmVjMS54ICogdmVjMi55ICsgdmVjMS55ICogdmVjMi55O1xyXG59XHJcbmV4cG9ydHMuZG90VmVjdG9ycyA9IGRvdFZlY3RvcnM7XHJcbmZ1bmN0aW9uIGlzVmVjWmVybyh2ZWMpIHtcclxuICAgIHJldHVybiBnZXRWZWNMZW5ndGgodmVjKSA8IDAuMDAwMTtcclxufVxyXG5leHBvcnRzLmlzVmVjWmVybyA9IGlzVmVjWmVybztcclxuZnVuY3Rpb24gZ2V0QW5nbGVCZXR3ZWVuVmVjdG9ycyh2ZWMxLCB2ZWMyKSB7XHJcbiAgICByZXR1cm4gKE1hdGguYXRhbjIodmVjMi55IC0gdmVjMS55LCB2ZWMyLnggLSB2ZWMxLngpICogMTgwKSAvIE1hdGguUEk7XHJcbn1cclxuZXhwb3J0cy5nZXRBbmdsZUJldHdlZW5WZWN0b3JzID0gZ2V0QW5nbGVCZXR3ZWVuVmVjdG9ycztcclxuZnVuY3Rpb24gcmFkc1RvRGVncmVlcyhyYWRzKSB7XHJcbiAgICByZXR1cm4gKHJhZHMgKiAxODApIC8gTWF0aC5QSTtcclxufVxyXG5leHBvcnRzLnJhZHNUb0RlZ3JlZXMgPSByYWRzVG9EZWdyZWVzO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgdXRpbHNfMSA9IHJlcXVpcmUoXCIuLi8uLi8uLi91dGlsc1wiKTtcclxudmFyIERBTVBJTkcgPSAwLjAzO1xyXG52YXIgU3ByaW5nMkQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTcHJpbmcyRChub2RlMSwgbm9kZTIsIHJlc3REaXN0YW5jZSwgc3RpZmZuZXNzKSB7XHJcbiAgICAgICAgdGhpcy5ub2RlMSA9IG5vZGUxO1xyXG4gICAgICAgIHRoaXMubm9kZTIgPSBub2RlMjtcclxuICAgICAgICB0aGlzLnJlc3REaXN0YW5jZSA9IHJlc3REaXN0YW5jZTtcclxuICAgICAgICB0aGlzLnN0aWZmbmVzcyA9IHN0aWZmbmVzcztcclxuICAgIH1cclxuICAgIFNwcmluZzJELnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHhBYnMgPSB1dGlsc18xLmdldERpc3RhbmNlQmV0d2VlblZlY3RvcnModGhpcy5ub2RlMS5wb3NpdGlvbiwgdGhpcy5ub2RlMi5wb3NpdGlvbik7XHJcbiAgICAgICAgeEFicyA9IHhBYnMgfHwgMTtcclxuICAgICAgICB2YXIgbm9ybTEgPSB1dGlsc18xLm5vcm1hbGl6ZVZlYyh1dGlsc18xLnN1YlZlY3RvcnModGhpcy5ub2RlMi5wb3NpdGlvbiwgdGhpcy5ub2RlMS5wb3NpdGlvbikpO1xyXG4gICAgICAgIHZhciBub3JtMiA9IHV0aWxzXzEubm9ybWFsaXplVmVjKHV0aWxzXzEuc3ViVmVjdG9ycyh0aGlzLm5vZGUxLnBvc2l0aW9uLCB0aGlzLm5vZGUyLnBvc2l0aW9uKSk7XHJcbiAgICAgICAgdmFyIHYxID0gdXRpbHNfMS5zdWJWZWN0b3JzKHRoaXMubm9kZTEudmVsb2NpdHksIHRoaXMubm9kZTIudmVsb2NpdHkpO1xyXG4gICAgICAgIHZhciB2MiA9IHV0aWxzXzEuc3ViVmVjdG9ycyh0aGlzLm5vZGUyLnZlbG9jaXR5LCB0aGlzLm5vZGUxLnZlbG9jaXR5KTtcclxuICAgICAgICB2YXIgRjF4ID0gdGhpcy5zdGlmZm5lc3MgKiAoeEFicyAtIHRoaXMucmVzdERpc3RhbmNlKSAqIChub3JtMS54IC8geEFicykgLVxyXG4gICAgICAgICAgICBEQU1QSU5HICogdjEueDtcclxuICAgICAgICB2YXIgRjF5ID0gdGhpcy5zdGlmZm5lc3MgKiAoeEFicyAtIHRoaXMucmVzdERpc3RhbmNlKSAqIChub3JtMS55IC8geEFicykgLVxyXG4gICAgICAgICAgICBEQU1QSU5HICogdjEueTtcclxuICAgICAgICB2YXIgRjJ4ID0gdGhpcy5zdGlmZm5lc3MgKiAoeEFicyAtIHRoaXMucmVzdERpc3RhbmNlKSAqIChub3JtMi54IC8geEFicykgLVxyXG4gICAgICAgICAgICBEQU1QSU5HICogdjIueDtcclxuICAgICAgICB2YXIgRjJ5ID0gdGhpcy5zdGlmZm5lc3MgKiAoeEFicyAtIHRoaXMucmVzdERpc3RhbmNlKSAqIChub3JtMi55IC8geEFicykgLVxyXG4gICAgICAgICAgICBEQU1QSU5HICogdjIueTtcclxuICAgICAgICB0aGlzLm5vZGUxLmFjY2VsZXJhdGlvbi54ICs9IEYxeCAvIHRoaXMubm9kZTEubWFzcztcclxuICAgICAgICB0aGlzLm5vZGUxLmFjY2VsZXJhdGlvbi55ICs9IEYxeSAvIHRoaXMubm9kZTEubWFzcztcclxuICAgICAgICB0aGlzLm5vZGUyLmFjY2VsZXJhdGlvbi54ICs9IEYyeCAvIHRoaXMubm9kZTIubWFzcztcclxuICAgICAgICB0aGlzLm5vZGUyLmFjY2VsZXJhdGlvbi55ICs9IEYyeSAvIHRoaXMubm9kZTIubWFzcztcclxuICAgIH07XHJcbiAgICByZXR1cm4gU3ByaW5nMkQ7XHJcbn0oKSk7XHJcbmV4cG9ydHMuZGVmYXVsdCA9IFNwcmluZzJEO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuZnVuY3Rpb24gX19leHBvcnQobSkge1xyXG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xyXG59XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuZnVuY3Rpb24gcGh5c2ljc1N0ZXAobm9kZXMsIGVkZ2VzLCBhdHRyYWN0aW9ucykge1xyXG4gICAgY29uc29sZS50aW1lKFwiYXR0clwiKTtcclxuICAgIGF0dHJhY3Rpb25zLmZvckVhY2goZnVuY3Rpb24gKGF0dHIpIHtcclxuICAgICAgICBhdHRyLnVwZGF0ZSgpO1xyXG4gICAgfSk7XHJcbiAgICBjb25zb2xlLnRpbWVFbmQoXCJhdHRyXCIpO1xyXG4gICAgY29uc29sZS50aW1lKFwic3ByaW5nc1wiKTtcclxuICAgIGVkZ2VzLmZvckVhY2goZnVuY3Rpb24gKGVkZ2UpIHtcclxuICAgICAgICBlZGdlLnVwZGF0ZSgpO1xyXG4gICAgfSk7XHJcbiAgICBjb25zb2xlLnRpbWVFbmQoXCJzcHJpbmdzXCIpO1xyXG4gICAgY29uc29sZS50aW1lKFwibm9kZXNcIik7XHJcbiAgICBub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uIChub2RlKSB7XHJcbiAgICAgICAgbm9kZS51cGRhdGUoKTtcclxuICAgIH0pO1xyXG4gICAgY29uc29sZS50aW1lRW5kKFwibm9kZXNcIik7XHJcbn1cclxuZXhwb3J0cy5waHlzaWNzU3RlcCA9IHBoeXNpY3NTdGVwO1xyXG5fX2V4cG9ydChyZXF1aXJlKFwiLi9hdHRyYWN0aW9uXCIpKTtcclxuX19leHBvcnQocmVxdWlyZShcIi4vbm9kZTJkXCIpKTtcclxuX19leHBvcnQocmVxdWlyZShcIi4vc3ByaW5nc1wiKSk7XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmZ1bmN0aW9uIGNyZWF0ZUxpbmUoY29udGV4dCwgZWRnZSkge1xyXG4gICAgY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgIGNvbnRleHQubGluZVdpZHRoID0gMjtcclxuICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBcImJsdWVcIjtcclxuICAgIGNvbnRleHQubW92ZVRvKGVkZ2Uubm9kZTEucG9zaXRpb24ueCwgZWRnZS5ub2RlMS5wb3NpdGlvbi55KTtcclxuICAgIGNvbnRleHQubGluZVRvKGVkZ2Uubm9kZTIucG9zaXRpb24ueCwgZWRnZS5ub2RlMi5wb3NpdGlvbi55KTtcclxuICAgIGNvbnRleHQuc3Ryb2tlKCk7XHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlQ2lyY2xlKGNvbnRleHQsIG5vZGUsIHJhZGl1cykge1xyXG4gICAgaWYgKHJhZGl1cyA9PT0gdm9pZCAwKSB7IHJhZGl1cyA9IDIwOyB9XHJcbiAgICBjb250ZXh0LmJlZ2luUGF0aCgpO1xyXG4gICAgY29udGV4dC5hcmMobm9kZS5wb3NpdGlvbi54LCBub2RlLnBvc2l0aW9uLnksIHJhZGl1cywgMCwgMiAqIE1hdGguUEksIGZhbHNlKTtcclxuICAgIGNvbnRleHQuZmlsbFN0eWxlID0gXCIjMjUyNTI1XCI7XHJcbiAgICBjb250ZXh0LmZpbGwoKTtcclxuICAgIGNvbnRleHQubGluZVdpZHRoID0gNTtcclxuICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSBcIiMyNTI1MjVcIjtcclxuICAgIGNvbnRleHQuc3Ryb2tlKCk7XHJcbn1cclxuZnVuY3Rpb24gY3JlYXRlQ2FudmFzKGNvbnRhaW5lcikge1xyXG4gICAgdmFyIGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIik7XHJcbiAgICB2YXIgd2lkdGggPSBjb250YWluZXIuY2xpZW50V2lkdGg7XHJcbiAgICB2YXIgaGVpZ2h0ID0gY29udGFpbmVyLmNsaWVudEhlaWdodDtcclxuICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xyXG4gICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcclxuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChjYW52YXMpO1xyXG4gICAgcmV0dXJuIGNhbnZhcztcclxufVxyXG5leHBvcnRzLmNyZWF0ZUNhbnZhcyA9IGNyZWF0ZUNhbnZhcztcclxuZnVuY3Rpb24gcmVuZGVyKGN0eCwgbm9kZXMsIGVkZ2VzKSB7XHJcbiAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGN0eC5jYW52YXMud2lkdGgsIGN0eC5jYW52YXMuaGVpZ2h0KTtcclxuICAgIGVkZ2VzLmZvckVhY2goZnVuY3Rpb24gKGVkZ2UsIGtleSkge1xyXG4gICAgICAgIGNyZWF0ZUxpbmUoY3R4LCBlZGdlKTtcclxuICAgIH0pO1xyXG4gICAgbm9kZXMuZm9yRWFjaChmdW5jdGlvbiAobm9kZSkge1xyXG4gICAgICAgIGNyZWF0ZUNpcmNsZShjdHgsIG5vZGUsIDIwKTtcclxuICAgIH0pO1xyXG59XHJcbmV4cG9ydHMucmVuZGVyID0gcmVuZGVyO1xyXG4iLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG5mdW5jdGlvbiBnZXRNb3VzZVBvc2l0aW9uKGNhbnZhcywgZSkge1xyXG4gICAgdmFyIHggPSBlLnBhZ2VYIC0gY2FudmFzLm9mZnNldExlZnQ7XHJcbiAgICB2YXIgeSA9IGUucGFnZVkgLSBjYW52YXMub2Zmc2V0VG9wO1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICB4OiB4LCB5OiB5XHJcbiAgICB9O1xyXG59XHJcbmV4cG9ydHMuZ2V0TW91c2VQb3NpdGlvbiA9IGdldE1vdXNlUG9zaXRpb247XHJcbiIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciB1dGlsc18xID0gcmVxdWlyZShcIi4uLy4uLy4uL3V0aWxzXCIpO1xyXG5leHBvcnRzLkdSQVZJVFkgPSA2LjY3NDI4ICogTWF0aC5wb3coMTAsIC0xMSk7XHJcbnZhciBBdHRyYWN0aW9uMkQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBBdHRyYWN0aW9uMkQobm9kZTEsIG5vZGUyLCBncmF2aXR5KSB7XHJcbiAgICAgICAgaWYgKGdyYXZpdHkgPT09IHZvaWQgMCkgeyBncmF2aXR5ID0gZXhwb3J0cy5HUkFWSVRZOyB9XHJcbiAgICAgICAgdGhpcy5ub2RlMSA9IG5vZGUxO1xyXG4gICAgICAgIHRoaXMubm9kZTIgPSBub2RlMjtcclxuICAgICAgICB0aGlzLmdyYXZpdHkgPSBncmF2aXR5O1xyXG4gICAgfVxyXG4gICAgQXR0cmFjdGlvbjJELnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcInBvczFcIiwgdGhpcy5ub2RlMS5wb3NpdGlvbik7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcInBvczJcIiwgdGhpcy5ub2RlMi5wb3NpdGlvbik7XHJcbiAgICAgICAgdmFyIGFic1ggPSB1dGlsc18xLmdldERpc3RhbmNlQmV0d2VlblZlY3RvcnModGhpcy5ub2RlMS5wb3NpdGlvbiwgdGhpcy5ub2RlMi5wb3NpdGlvbikgfHwgMTtcclxuICAgICAgICB2YXIgRiA9IHRoaXMuZ3Jhdml0eSAqICgodGhpcy5ub2RlMS5tYXNzICogdGhpcy5ub2RlMi5tYXNzKSAvIChhYnNYICogYWJzWCkpO1xyXG4gICAgICAgIHZhciBhbmdsZSA9IHV0aWxzXzEuZ2V0QW5nbGVCZXR3ZWVuVmVjdG9ycyh0aGlzLm5vZGUxLnBvc2l0aW9uLCB0aGlzLm5vZGUyLnBvc2l0aW9uKTtcclxuICAgICAgICAvL2NvbnNvbGUubG9nKFwiYW5nbGVcIiwgYW5nbGUpO1xyXG4gICAgICAgIHZhciBmMSA9IHV0aWxzXzEubm9ybWFsaXplVmVjKHtcclxuICAgICAgICAgICAgeDogLUYgKiBNYXRoLmNvcyhhbmdsZSksXHJcbiAgICAgICAgICAgIHk6IC1GICogTWF0aC5zaW4oYW5nbGUpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdmFyIGYyID0gdXRpbHNfMS5ub3JtYWxpemVWZWMoeyB4OiBGICogTWF0aC5jb3MoYW5nbGUpLCB5OiBGICogTWF0aC5zaW4oYW5nbGUpIH0pO1xyXG4gICAgICAgIC8vY29uc29sZS5sb2coXCJmMVwiLCBmMSk7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhcImYyXCIsIGYyKTtcclxuICAgICAgICB0aGlzLm5vZGUxLmFjY2VsZXJhdGlvbi54ICs9IGYxLnggLyB0aGlzLm5vZGUxLm1hc3M7XHJcbiAgICAgICAgdGhpcy5ub2RlMS5hY2NlbGVyYXRpb24ueSArPSBmMS55IC8gdGhpcy5ub2RlMS5tYXNzO1xyXG4gICAgICAgIHRoaXMubm9kZTIuYWNjZWxlcmF0aW9uLnggKz0gZjIueCAvIHRoaXMubm9kZTIubWFzcztcclxuICAgICAgICB0aGlzLm5vZGUyLmFjY2VsZXJhdGlvbi55ICs9IGYyLnggLyB0aGlzLm5vZGUyLm1hc3M7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEF0dHJhY3Rpb24yRDtcclxufSgpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gQXR0cmFjdGlvbjJEO1xyXG4iXSwic291cmNlUm9vdCI6IiJ9