!function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}(n(3))},function(t,e,n){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(n(2)),s=i(n(4)),r=n(5),c=n(6),a=function(){function t(t,e,n,i){var r=this;this.numLoops=0,this.container=t;var a=e.length,u=n.length;this.graphEdges=new Map,this.graphNodes=new Map;for(var l=0;l<a;l++){var h={x:Math.random()*t.clientWidth,y:Math.random()*t.clientHeight};this.graphNodes.set(e[l].id,new o.default(1,h))}for(l=0;l<u;l++)this.graphEdges.set(l,new s.default(this.graphNodes.get(n[l].source),this.graphNodes.get(n[l].target),150,20));this.canvas=c.createCanvas(t),requestAnimationFrame(function(){r.mainLoop()})}return t.prototype.mainLoop=function(){var t=this;console.log("step"),requestAnimationFrame(function(){t.mainLoop()}),r.physicsStep(this.graphNodes,this.graphEdges),c.render(this.canvas.getContext("2d"),this.graphNodes,this.graphEdges),this.numLoops++},t}();window.VNetGraph||(window.VNetGraph=a),e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=function(){function t(t,e){this.mass=t,this.position=e,this.accelleration={x:0,y:0},this.velocity={x:0,y:0}}return t.prototype.update=function(){this.velocity=i.addVecs(this.velocity,this.accelleration),this.position=i.addVecs(this.position,this.velocity),this.velocity=i.multiplyVecByScalar(this.velocity,.7),this.accelleration=i.multiplyVecByScalar(this.accelleration,.3)},t}();e.default=o},function(t,e,n){"use strict";function i(t,e){return e?{x:t.x/e,y:t.y/e}:{x:t.x,y:t.y}}function o(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function s(t,e){return t.x*e.y+t.y*e.y}function r(t){return 180*t/Math.PI}Object.defineProperty(e,"__esModule",{value:!0}),e.addVecs=function(t,e){return{x:t.x+e.x,y:t.y+e.y}},e.subVecs=function(t,e){return{x:t.x-e.x,y:t.y-e.y}},e.multiplyVecByScalar=function(t,e){return{x:t.x*e,y:t.y*e}},e.divideVecByScalar=i,e.getVecLength=o,e.normalizeVec=function(t){return i(t,o(t))},e.getDistanceBetweenVecs=function(t,e){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)},e.dotVecs=s,e.getAngleBetweenVecs=function(t,e){var n=o(t),i=o(e),c=s(t,e)/(n*i);return r(Math.acos(c))},e.radsToDegrees=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=function(){function t(t,e,n,i){this.node1=t,this.node2=e,this.restDistance=n,this.stiffness=i}return t.prototype.update=function(){var t=i.getDistanceBetweenVecs(this.node1.position,this.node2.position);t=t||1;var e=i.normalizeVec(i.subVecs(this.node2.position,this.node1.position)),n=i.normalizeVec(i.subVecs(this.node1.position,this.node2.position)),o=i.subVecs(this.node1.velocity,this.node2.velocity),s=i.subVecs(this.node2.velocity,this.node1.velocity);console.log(t);var r=this.stiffness*(t-this.restDistance)*(e.x/t)-.03*o.x,c=this.stiffness*(t-this.restDistance)*(e.y/t)-.03*o.y,a=this.stiffness*(t-this.restDistance)*(n.x/t)-.03*s.x,u=this.stiffness*(t-this.restDistance)*(n.y/t)-.03*s.y;console.log(r,c,a,u),this.node1.accelleration.x+=r/this.node1.mass,this.node1.accelleration.y+=c/this.node1.mass,this.node2.accelleration.x+=a/this.node2.mass,this.node2.accelleration.y+=u/this.node2.mass},t}();e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.physicsStep=function(t,e){e.forEach(function(t){t.update()}),t.forEach(function(t){t.update()})}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCanvas=function(t){var e=document.createElement("canvas"),n=t.clientWidth,i=t.clientHeight;return e.width=n,e.height=i,t.appendChild(e),e},e.render=function(t,e,n){t.clearRect(0,0,t.canvas.width,t.canvas.height),n.forEach(function(e){!function(t,e){t.beginPath(),t.lineWidth=2,t.strokeStyle="blue",t.moveTo(e.node1.position.x,e.node1.position.y),t.lineTo(e.node2.position.x,e.node2.position.y),t.stroke()}(t,e)}),e.forEach(function(e){!function(t,e,n){void 0===n&&(n=20),t.beginPath(),t.arc(e.position.x,e.position.y,n,0,2*Math.PI,!1),t.fillStyle="#252525",t.fill(),t.lineWidth=5,t.strokeStyle="#252525",t.stroke()}(t,e,20)})}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vbGliL3V0aWxzL2luZGV4LnRzIiwid2VicGFjazovLy8uL2xpYi9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9saWIvbW9kdWxlcy9QaHlzaWNzL25vZGUyZC9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9saWIvdXRpbHMvdmVjdG9yLnRzIiwid2VicGFjazovLy8uL2xpYi9tb2R1bGVzL1BoeXNpY3Mvc3ByaW5ncy9pbmRleC50cyIsIndlYnBhY2s6Ly8vLi9saWIvbW9kdWxlcy9QaHlzaWNzL2luZGV4LnRzIiwid2VicGFjazovLy8uL2xpYi9tb2R1bGVzL1JlbmRlcmVyL2luZGV4LnRzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwiX19leHBvcnQiLCJfX2ltcG9ydERlZmF1bHQiLCJ0aGlzIiwibW9kIiwiZGVmYXVsdCIsIm5vZGUyZF8xIiwic3ByaW5nc18xIiwiUGh5c2ljc18xIiwiUmVuZGVyZXJfMSIsIlZOZXRHcmFwaCIsImNvbnRhaW5lciIsIm5vZGVzIiwiZWRnZXMiLCJvcHRpb25zIiwiX3RoaXMiLCJudW1Mb29wcyIsIm5vZGVMZW4iLCJsZW5ndGgiLCJlZGdlTGVuIiwiZ3JhcGhFZGdlcyIsIk1hcCIsImdyYXBoTm9kZXMiLCJwb3MiLCJ4IiwiTWF0aCIsInJhbmRvbSIsImNsaWVudFdpZHRoIiwieSIsImNsaWVudEhlaWdodCIsInNldCIsImlkIiwic291cmNlIiwidGFyZ2V0IiwiY2FudmFzIiwiY3JlYXRlQ2FudmFzIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwibWFpbkxvb3AiLCJjb25zb2xlIiwibG9nIiwicGh5c2ljc1N0ZXAiLCJyZW5kZXIiLCJnZXRDb250ZXh0Iiwid2luZG93IiwidXRpbHNfMSIsIk5vZGUyRCIsIm1hc3MiLCJwb3NpdGlvbiIsImFjY2VsbGVyYXRpb24iLCJ2ZWxvY2l0eSIsInVwZGF0ZSIsImFkZFZlY3MiLCJtdWx0aXBseVZlY0J5U2NhbGFyIiwiZGl2aWRlVmVjQnlTY2FsYXIiLCJ2ZWMiLCJzY2FsYXIiLCJnZXRWZWNMZW5ndGgiLCJzcXJ0IiwiZG90VmVjcyIsInZlYzEiLCJ2ZWMyIiwicmFkc1RvRGVncmVlcyIsInJhZHMiLCJQSSIsInN1YlZlY3MiLCJub3JtYWxpemVWZWMiLCJnZXREaXN0YW5jZUJldHdlZW5WZWNzIiwiZHgiLCJkeSIsImdldEFuZ2xlQmV0d2VlblZlY3MiLCJ2ZWMxTGVuIiwidmVjMkxlbiIsInRoZXRhIiwiYWNvcyIsIlNwcmluZzJEIiwibm9kZTEiLCJub2RlMiIsInJlc3REaXN0YW5jZSIsInN0aWZmbmVzcyIsInhBYnMiLCJub3JtMSIsIm5vcm0yIiwidjEiLCJ2MiIsIkYxeCIsIkYxeSIsIkYyeCIsIkYyeSIsImZvckVhY2giLCJlZGdlIiwibm9kZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsIndpZHRoIiwiaGVpZ2h0IiwiYXBwZW5kQ2hpbGQiLCJjdHgiLCJjbGVhclJlY3QiLCJjb250ZXh0IiwiYmVnaW5QYXRoIiwibGluZVdpZHRoIiwic3Ryb2tlU3R5bGUiLCJtb3ZlVG8iLCJsaW5lVG8iLCJzdHJva2UiLCJjcmVhdGVMaW5lIiwicmFkaXVzIiwiYXJjIiwiZmlsbFN0eWxlIiwiZmlsbCIsImNyZWF0ZUNpcmNsZSJdLCJtYXBwaW5n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QUhBSyxFQUFBMkQsUUFDQTNELEVBQUE0RCxTQUNBbkYsRUFBQW9GLFlBQUE3RCxHQUNBQSxHQVlBbkUsRUFBQTBFLE9BVEEsU0FBQXVELEVBQUFwRixFQUFBQyxHQUNBbUYsRUFBQUMsVUFBQSxJQUFBRCxFQUFBOUQsT0FBQTJELE1BQUFHLEVBQUE5RCxPQUFBNEQsUUFDQWpGLEVBQUEyRSxRQUFBLFNBQUFDLElBOUJBLFNBQUFTLEVBQUFULEdBQ0FTLEVBQUFDLFlBQ0FELEVBQUFFLFVBQUEsRUFDQUYsRUFBQUcsWUFBQSxPQUNBSCxFQUFBSSxPQUFBYixFQUFBZCxNQUFBNUIsU0FBQXZCLEVBQUFpRSxFQUFBZCxNQUFBNUIsU0FBQW5CLEdBQ0FzRSxFQUFBSyxPQUFBZCxFQUFBYixNQUFBN0IsU0FBQXZCLEVBQUFpRSxFQUFBYixNQUFBN0IsU0FBQW5CLEdBQ0FzRSxFQUFBTSxTQXlCQUMsQ0FBQVQsRUFBQVAsS0FFQTdFLEVBQUE0RSxRQUFBLFNBQUFFLElBekJBLFNBQUFRLEVBQUFSLEVBQUFnQixRQUNBLElBQUFBLElBQTRCQSxFQUFBLElBQzVCUixFQUFBQyxZQUNBRCxFQUFBUyxJQUFBakIsRUFBQTNDLFNBQUF2QixFQUFBa0UsRUFBQTNDLFNBQUFuQixFQUFBOEUsRUFBQSxJQUFBakYsS0FBQXNDLElBQUEsR0FDQW1DLEVBQUFVLFVBQUEsVUFDQVYsRUFBQVcsT0FDQVgsRUFBQUUsVUFBQSxFQUNBRixFQUFBRyxZQUFBLFVBQ0FILEVBQUFNLFNBa0JBTSxDQUFBZCxFQUFBTixFQUFBIiwiZmlsZSI6IlZOZXRXb3JrLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDEpO1xuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5mdW5jdGlvbiBfX2V4cG9ydChtKSB7XG4gICAgZm9yICh2YXIgcCBpbiBtKSBpZiAoIWV4cG9ydHMuaGFzT3duUHJvcGVydHkocCkpIGV4cG9ydHNbcF0gPSBtW3BdO1xufVxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuX19leHBvcnQocmVxdWlyZShcIi4vdmVjdG9yXCIpKTtcbiIsIlwidXNlIHN0cmljdFwiO1xudmFyIF9faW1wb3J0RGVmYXVsdCA9ICh0aGlzICYmIHRoaXMuX19pbXBvcnREZWZhdWx0KSB8fCBmdW5jdGlvbiAobW9kKSB7XG4gICAgcmV0dXJuIChtb2QgJiYgbW9kLl9fZXNNb2R1bGUpID8gbW9kIDogeyBcImRlZmF1bHRcIjogbW9kIH07XG59O1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xudmFyIG5vZGUyZF8xID0gX19pbXBvcnREZWZhdWx0KHJlcXVpcmUoXCIuL21vZHVsZXMvUGh5c2ljcy9ub2RlMmRcIikpO1xudmFyIHNwcmluZ3NfMSA9IF9faW1wb3J0RGVmYXVsdChyZXF1aXJlKFwiLi9tb2R1bGVzL1BoeXNpY3Mvc3ByaW5nc1wiKSk7XG52YXIgUGh5c2ljc18xID0gcmVxdWlyZShcIi4vbW9kdWxlcy9QaHlzaWNzXCIpO1xudmFyIFJlbmRlcmVyXzEgPSByZXF1aXJlKFwiLi9tb2R1bGVzL1JlbmRlcmVyXCIpO1xudmFyIFZOZXRHcmFwaCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBWTmV0R3JhcGgoY29udGFpbmVyLCBub2RlcywgZWRnZXMsIG9wdGlvbnMpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcbiAgICAgICAgdGhpcy5udW1Mb29wcyA9IDA7XG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgICAgICB2YXIgbm9kZUxlbiA9IG5vZGVzLmxlbmd0aDtcbiAgICAgICAgdmFyIGVkZ2VMZW4gPSBlZGdlcy5sZW5ndGg7XG4gICAgICAgIHRoaXMuZ3JhcGhFZGdlcyA9IG5ldyBNYXAoKTtcbiAgICAgICAgdGhpcy5ncmFwaE5vZGVzID0gbmV3IE1hcCgpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVMZW47IGkrKykge1xuICAgICAgICAgICAgdmFyIHBvcyA9IHtcbiAgICAgICAgICAgICAgICB4OiBNYXRoLnJhbmRvbSgpICogY29udGFpbmVyLmNsaWVudFdpZHRoLFxuICAgICAgICAgICAgICAgIHk6IE1hdGgucmFuZG9tKCkgKiBjb250YWluZXIuY2xpZW50SGVpZ2h0XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5ncmFwaE5vZGVzLnNldChub2Rlc1tpXS5pZCwgbmV3IG5vZGUyZF8xLmRlZmF1bHQoMSwgcG9zKSk7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlZGdlTGVuOyBpKyspIHtcbiAgICAgICAgICAgIHRoaXMuZ3JhcGhFZGdlcy5zZXQoaSwgbmV3IHNwcmluZ3NfMS5kZWZhdWx0KHRoaXMuZ3JhcGhOb2Rlcy5nZXQoZWRnZXNbaV0uc291cmNlKSwgdGhpcy5ncmFwaE5vZGVzLmdldChlZGdlc1tpXS50YXJnZXQpLCAxNTAsIDIwKSk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jYW52YXMgPSBSZW5kZXJlcl8xLmNyZWF0ZUNhbnZhcyhjb250YWluZXIpO1xuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMubWFpbkxvb3AoKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFZOZXRHcmFwaC5wcm90b3R5cGUubWFpbkxvb3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG4gICAgICAgIGNvbnNvbGUubG9nKCdzdGVwJyk7XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpcy5tYWluTG9vcCgpO1xuICAgICAgICB9KTtcbiAgICAgICAgUGh5c2ljc18xLnBoeXNpY3NTdGVwKHRoaXMuZ3JhcGhOb2RlcywgdGhpcy5ncmFwaEVkZ2VzKTtcbiAgICAgICAgUmVuZGVyZXJfMS5yZW5kZXIodGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKSwgdGhpcy5ncmFwaE5vZGVzLCB0aGlzLmdyYXBoRWRnZXMpO1xuICAgICAgICB0aGlzLm51bUxvb3BzKys7XG4gICAgfTtcbiAgICByZXR1cm4gVk5ldEdyYXBoO1xufSgpKTtcbmlmICghd2luZG93LlZOZXRHcmFwaCkge1xuICAgIHdpbmRvdy5WTmV0R3JhcGggPSBWTmV0R3JhcGg7XG59XG5leHBvcnRzLmRlZmF1bHQgPSBWTmV0R3JhcGg7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciB1dGlsc18xID0gcmVxdWlyZShcIi4uLy4uLy4uL3V0aWxzXCIpO1xudmFyIE5vZGUyRCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBOb2RlMkQobWFzcywgcG9zaXRpb24pIHtcbiAgICAgICAgdGhpcy5tYXNzID0gbWFzcztcbiAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uO1xuICAgICAgICB0aGlzLmFjY2VsbGVyYXRpb24gPSB7IHg6IDAsIHk6IDAgfTtcbiAgICAgICAgdGhpcy52ZWxvY2l0eSA9IHsgeDogMCwgeTogMCB9O1xuICAgIH1cbiAgICBOb2RlMkQucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdGhpcy52ZWxvY2l0eSA9IHV0aWxzXzEuYWRkVmVjcyh0aGlzLnZlbG9jaXR5LCB0aGlzLmFjY2VsbGVyYXRpb24pO1xuICAgICAgICB0aGlzLnBvc2l0aW9uID0gdXRpbHNfMS5hZGRWZWNzKHRoaXMucG9zaXRpb24sIHRoaXMudmVsb2NpdHkpO1xuICAgICAgICB0aGlzLnZlbG9jaXR5ID0gdXRpbHNfMS5tdWx0aXBseVZlY0J5U2NhbGFyKHRoaXMudmVsb2NpdHksIDAuNyk7XG4gICAgICAgIHRoaXMuYWNjZWxsZXJhdGlvbiA9IHV0aWxzXzEubXVsdGlwbHlWZWNCeVNjYWxhcih0aGlzLmFjY2VsbGVyYXRpb24sIDAuMyk7XG4gICAgfTtcbiAgICByZXR1cm4gTm9kZTJEO1xufSgpKTtcbmV4cG9ydHMuZGVmYXVsdCA9IE5vZGUyRDtcbiIsIlwidXNlIHN0cmljdFwiO1xuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xuZnVuY3Rpb24gYWRkVmVjcyh2ZWMxLCB2ZWMyKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgeDogdmVjMS54ICsgdmVjMi54LFxuICAgICAgICB5OiB2ZWMxLnkgKyB2ZWMyLnlcbiAgICB9O1xufVxuZXhwb3J0cy5hZGRWZWNzID0gYWRkVmVjcztcbmZ1bmN0aW9uIHN1YlZlY3ModmVjMSwgdmVjMikge1xuICAgIHJldHVybiB7XG4gICAgICAgIHg6IHZlYzEueCAtIHZlYzIueCxcbiAgICAgICAgeTogdmVjMS55IC0gdmVjMi55XG4gICAgfTtcbn1cbmV4cG9ydHMuc3ViVmVjcyA9IHN1YlZlY3M7XG5mdW5jdGlvbiBtdWx0aXBseVZlY0J5U2NhbGFyKHZlYywgc2NhbGFyKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICAgeDogdmVjLnggKiBzY2FsYXIsXG4gICAgICAgIHk6IHZlYy55ICogc2NhbGFyXG4gICAgfTtcbn1cbmV4cG9ydHMubXVsdGlwbHlWZWNCeVNjYWxhciA9IG11bHRpcGx5VmVjQnlTY2FsYXI7XG5mdW5jdGlvbiBkaXZpZGVWZWNCeVNjYWxhcih2ZWMsIHNjYWxhcikge1xuICAgIGlmIChzY2FsYXIpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIHg6IHZlYy54IC8gc2NhbGFyLFxuICAgICAgICAgICAgeTogdmVjLnkgLyBzY2FsYXJcbiAgICAgICAgfTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICB4OiB2ZWMueCxcbiAgICAgICAgICAgIHk6IHZlYy55XG4gICAgICAgIH07XG4gICAgfVxufVxuZXhwb3J0cy5kaXZpZGVWZWNCeVNjYWxhciA9IGRpdmlkZVZlY0J5U2NhbGFyO1xuZnVuY3Rpb24gZ2V0VmVjTGVuZ3RoKHZlYykge1xuICAgIHJldHVybiBNYXRoLnNxcnQodmVjLnggKiB2ZWMueCArIHZlYy55ICogdmVjLnkpO1xufVxuZXhwb3J0cy5nZXRWZWNMZW5ndGggPSBnZXRWZWNMZW5ndGg7XG5mdW5jdGlvbiBub3JtYWxpemVWZWModmVjKSB7XG4gICAgcmV0dXJuIGRpdmlkZVZlY0J5U2NhbGFyKHZlYywgZ2V0VmVjTGVuZ3RoKHZlYykpO1xufVxuZXhwb3J0cy5ub3JtYWxpemVWZWMgPSBub3JtYWxpemVWZWM7XG5mdW5jdGlvbiBnZXREaXN0YW5jZUJldHdlZW5WZWNzKHZlYzEsIHZlYzIpIHtcbiAgICB2YXIgZHggPSB2ZWMxLnggLSB2ZWMyLng7XG4gICAgdmFyIGR5ID0gdmVjMS55IC0gdmVjMi55O1xuICAgIHJldHVybiBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xufVxuZXhwb3J0cy5nZXREaXN0YW5jZUJldHdlZW5WZWNzID0gZ2V0RGlzdGFuY2VCZXR3ZWVuVmVjcztcbmZ1bmN0aW9uIGRvdFZlY3ModmVjMSwgdmVjMikge1xuICAgIHJldHVybiB2ZWMxLnggKiB2ZWMyLnkgKyB2ZWMxLnkgKiB2ZWMyLnk7XG59XG5leHBvcnRzLmRvdFZlY3MgPSBkb3RWZWNzO1xuZnVuY3Rpb24gZ2V0QW5nbGVCZXR3ZWVuVmVjcyh2ZWMxLCB2ZWMyKSB7XG4gICAgdmFyIHZlYzFMZW4gPSBnZXRWZWNMZW5ndGgodmVjMSk7XG4gICAgdmFyIHZlYzJMZW4gPSBnZXRWZWNMZW5ndGgodmVjMik7XG4gICAgdmFyIGRvdCA9IGRvdFZlY3ModmVjMSwgdmVjMik7XG4gICAgdmFyIHRoZXRhID0gZG90IC8gKHZlYzFMZW4gKiB2ZWMyTGVuKTtcbiAgICByZXR1cm4gcmFkc1RvRGVncmVlcyhNYXRoLmFjb3ModGhldGEpKTtcbn1cbmV4cG9ydHMuZ2V0QW5nbGVCZXR3ZWVuVmVjcyA9IGdldEFuZ2xlQmV0d2VlblZlY3M7XG5mdW5jdGlvbiByYWRzVG9EZWdyZWVzKHJhZHMpIHtcbiAgICByZXR1cm4gKHJhZHMgKiAxODApIC8gTWF0aC5QSTtcbn1cbmV4cG9ydHMucmFkc1RvRGVncmVlcyA9IHJhZHNUb0RlZ3JlZXM7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbnZhciB1dGlsc18xID0gcmVxdWlyZShcIi4uLy4uLy4uL3V0aWxzXCIpO1xudmFyIERBTVBJTkcgPSAwLjAzO1xudmFyIFNwcmluZzJEID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFNwcmluZzJEKG5vZGUxLCBub2RlMiwgcmVzdERpc3RhbmNlLCBzdGlmZm5lc3MpIHtcbiAgICAgICAgdGhpcy5ub2RlMSA9IG5vZGUxO1xuICAgICAgICB0aGlzLm5vZGUyID0gbm9kZTI7XG4gICAgICAgIHRoaXMucmVzdERpc3RhbmNlID0gcmVzdERpc3RhbmNlO1xuICAgICAgICB0aGlzLnN0aWZmbmVzcyA9IHN0aWZmbmVzcztcbiAgICB9XG4gICAgU3ByaW5nMkQucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHhBYnMgPSB1dGlsc18xLmdldERpc3RhbmNlQmV0d2VlblZlY3ModGhpcy5ub2RlMS5wb3NpdGlvbiwgdGhpcy5ub2RlMi5wb3NpdGlvbik7XG4gICAgICAgIHhBYnMgPSB4QWJzIHx8IDE7XG4gICAgICAgIHZhciBub3JtMSA9IHV0aWxzXzEubm9ybWFsaXplVmVjKHV0aWxzXzEuc3ViVmVjcyh0aGlzLm5vZGUyLnBvc2l0aW9uLCB0aGlzLm5vZGUxLnBvc2l0aW9uKSk7XG4gICAgICAgIHZhciBub3JtMiA9IHV0aWxzXzEubm9ybWFsaXplVmVjKHV0aWxzXzEuc3ViVmVjcyh0aGlzLm5vZGUxLnBvc2l0aW9uLCB0aGlzLm5vZGUyLnBvc2l0aW9uKSk7XG4gICAgICAgIHZhciB2MSA9IHV0aWxzXzEuc3ViVmVjcyh0aGlzLm5vZGUxLnZlbG9jaXR5LCB0aGlzLm5vZGUyLnZlbG9jaXR5KTtcbiAgICAgICAgdmFyIHYyID0gdXRpbHNfMS5zdWJWZWNzKHRoaXMubm9kZTIudmVsb2NpdHksIHRoaXMubm9kZTEudmVsb2NpdHkpO1xuICAgICAgICBjb25zb2xlLmxvZyh4QWJzKTtcbiAgICAgICAgdmFyIEYxeCA9IHRoaXMuc3RpZmZuZXNzICogKHhBYnMgLSB0aGlzLnJlc3REaXN0YW5jZSkgKiAobm9ybTEueCAvIHhBYnMpIC1cbiAgICAgICAgICAgIERBTVBJTkcgKiB2MS54O1xuICAgICAgICB2YXIgRjF5ID0gdGhpcy5zdGlmZm5lc3MgKiAoeEFicyAtIHRoaXMucmVzdERpc3RhbmNlKSAqIChub3JtMS55IC8geEFicykgLVxuICAgICAgICAgICAgREFNUElORyAqIHYxLnk7XG4gICAgICAgIHZhciBGMnggPSB0aGlzLnN0aWZmbmVzcyAqICh4QWJzIC0gdGhpcy5yZXN0RGlzdGFuY2UpICogKG5vcm0yLnggLyB4QWJzKSAtXG4gICAgICAgICAgICBEQU1QSU5HICogdjIueDtcbiAgICAgICAgdmFyIEYyeSA9IHRoaXMuc3RpZmZuZXNzICogKHhBYnMgLSB0aGlzLnJlc3REaXN0YW5jZSkgKiAobm9ybTIueSAvIHhBYnMpIC1cbiAgICAgICAgICAgIERBTVBJTkcgKiB2Mi55O1xuICAgICAgICBjb25zb2xlLmxvZyhGMXgsIEYxeSwgRjJ4LCBGMnkpO1xuICAgICAgICB0aGlzLm5vZGUxLmFjY2VsbGVyYXRpb24ueCArPSBGMXggLyB0aGlzLm5vZGUxLm1hc3M7XG4gICAgICAgIHRoaXMubm9kZTEuYWNjZWxsZXJhdGlvbi55ICs9IEYxeSAvIHRoaXMubm9kZTEubWFzcztcbiAgICAgICAgdGhpcy5ub2RlMi5hY2NlbGxlcmF0aW9uLnggKz0gRjJ4IC8gdGhpcy5ub2RlMi5tYXNzO1xuICAgICAgICB0aGlzLm5vZGUyLmFjY2VsbGVyYXRpb24ueSArPSBGMnkgLyB0aGlzLm5vZGUyLm1hc3M7XG4gICAgfTtcbiAgICByZXR1cm4gU3ByaW5nMkQ7XG59KCkpO1xuZXhwb3J0cy5kZWZhdWx0ID0gU3ByaW5nMkQ7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmZ1bmN0aW9uIHBoeXNpY3NTdGVwKG5vZGVzLCBlZGdlcykge1xuICAgIGVkZ2VzLmZvckVhY2goZnVuY3Rpb24gKGVkZ2UpIHtcbiAgICAgICAgZWRnZS51cGRhdGUoKTtcbiAgICB9KTtcbiAgICBub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIG5vZGUudXBkYXRlKCk7XG4gICAgfSk7XG59XG5leHBvcnRzLnBoeXNpY3NTdGVwID0gcGh5c2ljc1N0ZXA7XG4iLCJcInVzZSBzdHJpY3RcIjtcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcbmZ1bmN0aW9uIGNyZWF0ZUxpbmUoY29udGV4dCwgZWRnZSkge1xuICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgY29udGV4dC5saW5lV2lkdGggPSAyO1xuICAgIGNvbnRleHQuc3Ryb2tlU3R5bGUgPSAnYmx1ZSc7XG4gICAgY29udGV4dC5tb3ZlVG8oZWRnZS5ub2RlMS5wb3NpdGlvbi54LCBlZGdlLm5vZGUxLnBvc2l0aW9uLnkpO1xuICAgIGNvbnRleHQubGluZVRvKGVkZ2Uubm9kZTIucG9zaXRpb24ueCwgZWRnZS5ub2RlMi5wb3NpdGlvbi55KTtcbiAgICBjb250ZXh0LnN0cm9rZSgpO1xufVxuZnVuY3Rpb24gY3JlYXRlQ2lyY2xlKGNvbnRleHQsIG5vZGUsIHJhZGl1cykge1xuICAgIGlmIChyYWRpdXMgPT09IHZvaWQgMCkgeyByYWRpdXMgPSAyMDsgfVxuICAgIGNvbnRleHQuYmVnaW5QYXRoKCk7XG4gICAgY29udGV4dC5hcmMobm9kZS5wb3NpdGlvbi54LCBub2RlLnBvc2l0aW9uLnksIHJhZGl1cywgMCwgMiAqIE1hdGguUEksIGZhbHNlKTtcbiAgICBjb250ZXh0LmZpbGxTdHlsZSA9ICcjMjUyNTI1JztcbiAgICBjb250ZXh0LmZpbGwoKTtcbiAgICBjb250ZXh0LmxpbmVXaWR0aCA9IDU7XG4gICAgY29udGV4dC5zdHJva2VTdHlsZSA9ICcjMjUyNTI1JztcbiAgICBjb250ZXh0LnN0cm9rZSgpO1xufVxuZnVuY3Rpb24gY3JlYXRlQ2FudmFzKGNvbnRhaW5lcikge1xuICAgIHZhciBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICB2YXIgd2lkdGggPSBjb250YWluZXIuY2xpZW50V2lkdGg7XG4gICAgdmFyIGhlaWdodCA9IGNvbnRhaW5lci5jbGllbnRIZWlnaHQ7XG4gICAgY2FudmFzLndpZHRoID0gd2lkdGg7XG4gICAgY2FudmFzLmhlaWdodCA9IGhlaWdodDtcbiAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoY2FudmFzKTtcbiAgICByZXR1cm4gY2FudmFzO1xufVxuZXhwb3J0cy5jcmVhdGVDYW52YXMgPSBjcmVhdGVDYW52YXM7XG5mdW5jdGlvbiByZW5kZXIoY3R4LCBub2RlcywgZWRnZXMpIHtcbiAgICBjdHguY2xlYXJSZWN0KDAsIDAsIGN0eC5jYW52YXMud2lkdGgsIGN0eC5jYW52YXMuaGVpZ2h0KTtcbiAgICBlZGdlcy5mb3JFYWNoKGZ1bmN0aW9uIChlZGdlKSB7XG4gICAgICAgIGNyZWF0ZUxpbmUoY3R4LCBlZGdlKTtcbiAgICB9KTtcbiAgICBub2Rlcy5mb3JFYWNoKGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIGNyZWF0ZUNpcmNsZShjdHgsIG5vZGUsIDIwKTtcbiAgICB9KTtcbn1cbmV4cG9ydHMucmVuZGVyID0gcmVuZGVyO1xuIl0sInNvdXJjZVJvb3QiOiIifQ==